name: ExtDN M2 PHPStan
on:
  push:
    branches:
      - master
  pull_request:

jobs:
  phpstan:
    name: M2 PHPStan
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: extdn/github-actions-m2/magento-phpstan@master
        with:
          composer_name: integer-net/magento2-shippingpreselection
          # Note: module_source needs to be directory with composer.json, otherwise module is installed from github
          # and phpstan runs on local directory with broken autoloading. So the following does NOT work:
          #
          #  module_source: src
          #
          # A possible workaround is to modify the root composer autoload section in a preinstall script:
          #
          magento_preinstall_script: .github/autoload-tests.sh
